"use strict";var path=require("path"),webpack=require("webpack"),merge=require("webpack-merge"),AotPlugin=require("@ngtools/webpack").AotPlugin,CheckerPlugin=require("awesome-typescript-loader").CheckerPlugin;module.exports=function(n){var t=!(n&&n.prod),i={stats:{modules:!1},context:__dirname,resolve:{extensions:[".js",".ts"]},output:{filename:"[name].js",publicPath:"dist/"},module:{rules:[{test:/\.ts$/,use:t?["awesome-typescript-loader?silent=true","angular2-template-loader","angular2-router-loader"]:"@ngtools/webpack"},{test:/\.html$/,use:"html-loader?minimize=false"},{test:/\.css$/,use:["to-string-loader",t?"css-loader":"css-loader?minimize"]},{test:/\.(png|jpg|jpeg|gif|svg)$/,use:"url-loader?limit=25000"}]},plugins:[new CheckerPlugin]},r="./wwwroot/dist",u=merge(i,{entry:{"main-client":"./ClientApp/boot.browser.ts"},output:{path:path.join(__dirname,r)},plugins:[new webpack.DllReferencePlugin({context:__dirname,manifest:require("./wwwroot/dist/vendor-manifest.json")})].concat(t?[new webpack.SourceMapDevToolPlugin({filename:"[file].map",moduleFilenameTemplate:path.relative(r,"[resourcePath]")})]:[new webpack.optimize.UglifyJsPlugin,new AotPlugin({tsConfigPath:"./tsconfig.json",entryModule:path.join(__dirname,"ClientApp/app/app.browser.module#AppModule"),exclude:["./**/*.server.ts"]})])}),f=merge(i,{resolve:{mainFields:["main"]},entry:{"main-server":"./ClientApp/boot.server.ts"},plugins:[new webpack.DllReferencePlugin({context:__dirname,manifest:require("./ClientApp/dist/vendor-manifest.json"),sourceType:"commonjs2",name:"./vendor"})].concat(t?[]:[new AotPlugin({tsConfigPath:"./tsconfig.json",entryModule:path.join(__dirname,"ClientApp/app/app.server.module#AppModule"),exclude:["./**/*.browser.ts"]})]),output:{libraryTarget:"commonjs",path:path.join(__dirname,"./ClientApp/dist")},target:"node",devtool:"inline-source-map"});return[u,f]};